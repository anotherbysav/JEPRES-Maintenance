<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form Pendataan Prestasi</title>
    <link rel="stylesheet" href="login-centered.css" />
    <style>
      /* Background with elegant gradient and small stars */
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        height: 100vh;
        background: radial-gradient(
          ellipse at bottom,
          #1b2735 0%,
          #090a0f 100%
        );
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        color: white;
      }
      /* Star container */
      .stars {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        pointer-events: none;
        overflow: hidden;
        z-index: 0;
      }
      /* Individual stars */
      .star {
        position: absolute;
        background: white;
        border-radius: 50%;
        opacity: 0.8;
        animation: twinkle 2s infinite alternate;
      }
      /* Different sizes and animation delays for stars */
      .star.small {
        width: 2px;
        height: 2px;
        animation-delay: 0s;
      }
      .star.medium {
        width: 3px;
        height: 3px;
        animation-delay: 1s;
      }
      .star.large {
        width: 4px;
        height: 4px;
        animation-delay: 0.5s;
      }
      @keyframes twinkle {
        from {
          opacity: 0.3;
        }
        to {
          opacity: 1;
        }
      }

      .form-container {
        background: rgba(0, 0, 30, 0.85);
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
        width: 300px;
        position: relative;
        z-index: 1;
        color: white;
      }
      h2 {
        text-align: center;
        margin-bottom: 1.5rem;
        color: #f0f8ff;
        text-shadow: 0 0 5px #a0c8ff;
      }
      label {
        display: block;
        margin-top: 1rem;
        font-weight: bold;
        color: #cbd5e1;
      }
      input,
      textarea,
      select {
        width: 100%;
        padding: 0.5rem;
        margin-top: 0.3rem;
        border: 1px solid #555;
        border-radius: 6px;
        box-sizing: border-box;
        font-size: 1rem;
        background: #1a1a2e;
        color: white;
        transition: border-color 0.3s ease, box-shadow 0.3s ease,
          transform 0.3s ease;
        white-space: normal;
        word-wrap: break-word;
      }
      input:focus,
      textarea:focus,
      select:focus {
        border-color: #66aaff;
        outline: none;
        box-shadow: 0 0 8px #66aaff;
        transform: scale(1.05);
      }
      .button-group {
        margin-top: 1.5rem;
        display: flex;
        justify-content: space-between;
        gap: 1rem;
      }
      button {
        flex: 1;
        padding: 0.75rem;
        background-color: transparent;
        color: white;
        border: 2px solid white;
        border-radius: 6px;
        font-size: 1.1rem;
        cursor: pointer;
        box-shadow: none;
        transition: box-shadow 0.3s ease, background-color 0.3s ease;
      }
      button:hover {
        background-color: rgba(255, 255, 255, 0.1);
        box-shadow: 0 0 5px white, 0 0 10px white, 0 0 20px white,
          0 0 40px white;
      }
      #check-data-button {
        border-color: #ffeb3b;
        color: #ffeb3b;
      }
      #check-data-button:hover {
        background-color: rgba(255, 235, 59, 0.2);
        box-shadow: 0 0 5px #ffeb3b, 0 0 10px #ffeb3b, 0 0 20px #ffeb3b,
          0 0 40px #ffeb3b;
      }
      .upload-area {
        margin-top: 1rem;
        padding: 1rem;
        border: 2px dashed #66aaff;
        border-radius: 6px;
        text-align: center;
        color: #66aaff;
        cursor: pointer;
        transition: background-color 0.3s ease;
        background: #0f1626;
      }
      .upload-area.dragover {
        background-color: #1a2a4a;
      }
      .upload-area input[type="file"] {
        display: none;
      }
      .file-name {
        margin-top: 0.5rem;
        font-style: italic;
        color: #a0b9ff;
      }
    </style>
  </head>
  <body class="fade-in">
    <div class="stars" aria-hidden="true">
      <!-- Generate multiple stars with random positions -->
      <div class="star small" style="top: 10%; left: 20%"></div>
      <div class="star medium" style="top: 30%; left: 40%"></div>
      <div class="star small" style="top: 50%; left: 60%"></div>
      <div class="star large" style="top: 70%; left: 80%"></div>
      <div class="star small" style="top: 20%; left: 75%"></div>
      <div class="star medium" style="top: 40%; left: 15%"></div>
      <div class="star small" style="top: 60%; left: 35%"></div>
      <div class="star large" style="top: 80%; left: 55%"></div>
      <div class="star small" style="top: 25%; left: 85%"></div>
      <div class="star medium" style="top: 45%; left: 25%"></div>
    </div>
    <div class="form-container">
      <h2>Form Pendataan Prestasi</h2>
      <form id="achievement-form">
        <label for="title">Judul Prestasi</label>
        <input type="text" id="title" name="title" required />

        <label for="description">Deskripsi</label>
        <textarea
          id="description"
          name="description"
          rows="4"
          required
        ></textarea>

        <label for="date">Tanggal Prestasi</label>
        <div style="position: relative; display: inline-block; width: 100%">
          <input
            type="text"
            id="date"
            name="date"
            placeholder="YYYY-MM-DD"
            readonly
            required
            style="
              width: 100%;
              padding-right: 2.5rem;
              color: white;
              background-color: #1a1a2e;
              border: 1px solid #555;
              border-radius: 6px;
              font-size: 1rem;
              cursor: pointer;
            "
          />
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="white"
            viewBox="0 0 24 24"
            width="24"
            height="24"
            style="
              position: absolute;
              right: 8px;
              top: 50%;
              transform: translateY(-50%);
              cursor: pointer;
            "
            id="date-picker-icon"
          >
            <path
              d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11zM7 11h5v5H7z"
            />
          </svg>
          <div
            id="calendar-popup"
            style="
              display: none;
              position: absolute;
              top: 100%;
              right: 0;
              background: #1a1a2e;
              border: 1px solid #555;
              border-radius: 6px;
              padding: 0.5rem;
              z-index: 10;
              color: white;
              user-select: none;
            "
          ></div>
        </div>

        <script>
          const dateInput = document.getElementById("date");
          const calendarPopup = document.getElementById("calendar-popup");
          const datePickerIcon = document.getElementById("date-picker-icon");

          function formatDate(date) {
            const year = date.getFullYear();
            const month = ("0" + (date.getMonth() + 1)).slice(-2);
            const day = ("0" + date.getDate()).slice(-2);
            return `${year}-${month}-${day}`;
          }

          function createCalendar(date) {
            calendarPopup.innerHTML = "";
            const currentYear = date.getFullYear();
            const currentMonth = date.getMonth();

            const firstDay = new Date(currentYear, currentMonth, 1);
            const lastDay = new Date(currentYear, currentMonth + 1, 0);

            const daysInMonth = lastDay.getDate();
            const startDay = firstDay.getDay();

            const calendarTable = document.createElement("table");
            calendarTable.style.borderCollapse = "collapse";
            calendarTable.style.width = "100%";

            const headerRow = document.createElement("tr");
            const daysOfWeek = ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"];
            daysOfWeek.forEach((day) => {
              const th = document.createElement("th");
              th.textContent = day;
              th.style.padding = "4px";
              th.style.textAlign = "center";
              th.style.borderBottom = "1px solid #555";
              headerRow.appendChild(th);
            });
            calendarTable.appendChild(headerRow);

            let dateCount = 1;
            for (let i = 0; i < 6; i++) {
              const row = document.createElement("tr");
              for (let j = 0; j < 7; j++) {
                const cell = document.createElement("td");
                cell.style.padding = "4px";
                cell.style.textAlign = "center";
                cell.style.cursor = "pointer";
                if (i === 0 && j < startDay) {
                  cell.textContent = "";
                } else if (dateCount > daysInMonth) {
                  cell.textContent = "";
                } else {
                  cell.textContent = dateCount;
                  cell.addEventListener("click", () => {
                    dateInput.value = formatDate(
                      new Date(currentYear, currentMonth, dateCount)
                    );
                    calendarPopup.style.display = "none";
                  });
                  dateCount++;
                }
                row.appendChild(cell);
              }
              calendarTable.appendChild(row);
            }
            calendarPopup.appendChild(calendarTable);
          }

          function toggleCalendar() {
            if (calendarPopup.style.display === "none") {
              const selectedDate = dateInput.value
                ? new Date(dateInput.value)
                : new Date();
              createCalendar(selectedDate);
              calendarPopup.style.display = "block";
            } else {
              calendarPopup.style.display = "none";
            }
          }

          dateInput.addEventListener("click", toggleCalendar);
          datePickerIcon.addEventListener("click", toggleCalendar);

          document.addEventListener("click", (event) => {
            if (
              !calendarPopup.contains(event.target) &&
              event.target !== dateInput &&
              event.target !== datePickerIcon
            ) {
              calendarPopup.style.display = "none";
            }
          });
        </script>

        <label for="level">Tingkat Prestasi</label>
        <select id="level" name="level" required>
          <option value="">-- Pilih Tingkat --</option>
          <option value="lokal">Lokal</option>
          <option value="nasional">Nasional</option>
          <option value="internasional">Internasional</option>
        </select>

        <label>Upload Sertifikat</label>
        <div class="upload-area" id="upload-area">
          Drag & Drop file di sini atau klik untuk memilih file
          <input type="file" id="certificate" name="certificate" />
          <div class="file-name" id="file-name"></div>
        </div>

        <div class="button-group">
          <button type="submit">Simpan Prestasi</button>
          <button type="button" id="check-data-button">Cek Data</button>
        </div>
      </form>
    </div>
    <script>
      const uploadArea = document.getElementById("upload-area");
      const fileInput = document.getElementById("certificate");
      const fileNameDisplay = document.getElementById("file-name");
      const form = document.getElementById("achievement-form");
      const checkDataButton = document.getElementById("check-data-button");

      uploadArea.addEventListener("click", () => {
        fileInput.click();
      });

      fileInput.addEventListener("change", () => {
        if (fileInput.files.length > 0) {
          fileNameDisplay.textContent = fileInput.files[0].name;
        } else {
          fileNameDisplay.textContent = "";
        }
      });

      uploadArea.addEventListener("dragover", (event) => {
        event.preventDefault();
        uploadArea.classList.add("dragover");
      });

      uploadArea.addEventListener("dragleave", () => {
        uploadArea.classList.remove("dragover");
      });

      uploadArea.addEventListener("drop", (event) => {
        event.preventDefault();
        uploadArea.classList.remove("dragover");
        if (event.dataTransfer.files.length > 0) {
          fileInput.files = event.dataTransfer.files;
          fileNameDisplay.textContent = event.dataTransfer.files[0].name;
          // Automatically submit the form on file drop
          form.requestSubmit();
        }
      });

      form.addEventListener("submit", function (event) {
        event.preventDefault();
        if (!fileInput.files.length) {
          alert("Mohon upload sertifikat terlebih dahulu.");
          return;
        }
        const achievement = {
          id: Date.now(),
          title: this.title.value,
          description: this.description.value,
          date: this.date.value,
          level: this.level.value,
          certificate: fileInput.files[0].name
        };
        let achievements = JSON.parse(localStorage.getItem("achievements")) || [];
        achievements.push(achievement);
        localStorage.setItem("achievements", JSON.stringify(achievements));
        alert("Data prestasi berhasil disimpan!");
        this.reset();
        fileNameDisplay.textContent = "";
      });

      checkDataButton.addEventListener("click", () => {
        window.location.href = "achievements-list.html";
      });
    </script>
  </body>
</html>
